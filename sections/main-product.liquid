{{ 'section-main-product.css' | asset_url | stylesheet_tag }}

{%- render 'breadcrumb',
  container: 'large',
  vertical_space: 'vertical-space-xsmall',
  style: 'breadcrumb-main--margin breadcrumb-main--scroll element--hide-on-portable-plus'
-%}

{%- liquid
  if section.settings.gallery_desktop_width contains 'one-half'
    if section.settings.gallery_layout contains 'one-col'
      assign gallery_class = 'grid-1'
      assign parent_class = 'grid-2 grid-lap-1'
    else
      assign parent_class = 'grid-4 grid-lap-1'
      assign child_class = 'grid-offset-2 grid-offset-lap-1'
      assign gallery_class = 'grid-2 grid-portable-1'
      assign text_class = 'grid-offset-2 grid-offset-lap-1'
    endif
  else
    assign parent_class = 'grid-3 grid-portable-5 grid-lap-1'
    assign child_class = 'grid-offset-2 grid-offset-portable-3 grid-offset-lap-1'
    assign text_class = 'grid-portable-2 grid-offset-portable-2 grid-offset-lap-1'
    if section.settings.gallery_layout contains 'one-col'
      assign gallery_class = 'grid-1'
    else
      assign gallery_class = 'grid-2 grid-portable-1'
    endif
  endif
-%}

{%- liquid
  unless product.has_only_default_variant
    assign default_to_first_variant = section.settings.default_to_first_variant
  else
    assign default_to_first_variant = true
  endunless
-%}

{%- liquid
  if settings.show_currency_codes
    assign iso_code = localization.country.currency.iso_code | prepend: ' '
  endif
-%}

<div class="container container--large container--vertical-space-small {% unless settings.show_breadcrumb %} container--no-space-mobile {% endunless %}">
  {%- liquid
    assign gallery_mobile_width = section.settings.gallery_mobile_width
    if product.media.size == 1
      assign gallery_mobile_width = 100
    endif
    assign gallery_mobile_margin = section.settings.gallery_mobile_margin
    if product.media.size == 1
      assign gallery_mobile_margin = false
    endif
  -%}

  <product-page
    id="product-{{ section.id }}"
    class="
      grid grid--layout grid--gap-xlarge {{ parent_class }} grid--no-stretch
      main-product main-product--mobile-padding--{{ gallery_mobile_margin }}
      product-component--default-to-first-variant-{{ default_to_first_variant }}
    "
    data-collection="{{ collection.handle }}"
    data-id="{{ product.id }}"
    data-availability="{{ product.available }}"
    data-js-product-component
  >
    {%- assign current_variant = product.selected_or_first_available_variant -%}

    <div class="{{ child_class }} element--is-sticky">
      <div
        class="
          product-gallery
          product-gallery--{% if section.settings.gallery_layout contains 'scroll' %}scroll{% else %}slider{% endif %}
          lap--grid--slider-container
          {% if section.settings.gallery_layout contains 'scroll' and section.settings.show_thumbnails and product.media.size > 1 %} product-gallery--has-thumbnails {% endif %}
        "
        data-js-product-gallery
        style="--border-radius: {{ section.settings.border_radius }}px"
      >
        {% style %}
          #product-{{ section.id }} .product-gallery-item .lazy-image img {
            padding: {{ section.settings.gallery_padding }}% !important;
          }
          {%- if section.settings.gallery_background != 'rgba(0,0,0,0)' -%}
            #product-{{ section.id }} .product-gallery-item .lazy-image--fit {
              background-color: {{ section.settings.gallery_background }};
            }
          {%- endif -%}
          {%- if section.settings.gallery_border != 'rgba(0,0,0,0)' -%}
            #product-{{ section.id }} .product-gallery-item img,
            #product-{{ section.id }} .product-gallery-item iframe,
            #product-{{ section.id }} .product-gallery-item video {
              border: 1px solid {{ section.settings.gallery_border }};
            }
          {%- endif -%}
          {%- if section.settings.enhance_first_image -%}
            @media screen and (min-width: 1024px) {
            #product-{{ section.id }} .product-gallery-item:first-of-type {
                grid-column: span 2;
              }
            }
          {%- endif -%}
        {% endstyle %}

        {%- if product.media.size > 1 -%}
          <css-slider
            data-options='
              {
                "selector": ".product-gallery-item",
                "autoHeight": false,
                {%- if section.settings.gallery_layout contains 'scroll' -%}
                  "watchCSS": true,
                {%- endif -%}
                {%- if section.settings.show_thumbnails -%}
                  "thumbnails": false,
                  "navigation": false,
                {%- else -%}
                  "navigationDOM": "<span class=\"css-slider-button css-slider-prev\" style=\"display:none\"><svg fill=\"none\" height=\"11\" viewBox=\"0 0 6 11\" width=\"6\" xmlns=\"http://www.w3.org/2000/svg\"><path clip-rule=\"evenodd\" d=\"m4.32845 10.0708-4.18198-4.18194c-.195261-.19526-.195261-.51185 0-.70711l4.18198-4.181979c.19527-.195262.51185-.195262.70711 0 .19526.195259.19526.511849 0 .707109l-3.32843 3.32842s-.70713.4647-.00002 1l3.32845 3.32843c.19526.19526.19526.51185 0 .70707-.19526.1953-.51185.1953-.70711 0z\" fill=\"#000\" fill-rule=\"evenodd\"/></svg></span><span class=\"css-slider-button css-slider-next\" style=\"display:none\"><svg fill=\"none\" height=\"11\" viewBox=\"0 0 6 11\" width=\"6\" xmlns=\"http://www.w3.org/2000/svg\"><path clip-rule=\"evenodd\" d=\"m.853555.999962 4.181985 4.181978c.19526.19526.19526.51185 0 .70711l-4.181983 4.18195c-.195263.1953-.511845.1953-.707108 0-.1952631-.19523-.1952632-.51181 0-.70708l3.328431-3.32842s.70713-.4647.00002-1l-3.328453-3.32843c-.1952626-.19526-.1952627-.51185 0-.707108.195263-.195262.511845-.195262.707108 0z\" fill=\"#000\" fill-rule=\"evenodd\"/></svg></span>",
                  "thumbnailsDOM": "<div class=\"css-slider-dot-navigation\" style=\"display:none;--size:{{ product.media.size }}\"></div>",
                {%- endif -%}
                "listenScroll": false
              }
            '
            class="css-slider--bottom-navigation element--border-radius"
            style="display:block"
          >
        {%- endif -%}

        <div
          class="grid {% if section.settings.gallery_layout contains 'slider' %} grid--slider {% else %} grid--layout {% endif %} {{ gallery_class }} lap--grid--slider grid--gap-small"
          style="--mobile-media-width: {{ gallery_mobile_width }}%"
        >
          {%- if product.media.size == 0 -%}
            {%- unless settings.product_card_fallback_image == blank -%}
              {%- render 'product-media',
                fallback: true,
                aspect_ratio: section.settings.gallery_aspect_ratio,
                fit: section.settings.gallery_fit,
                layout: section.settings.gallery_layout,
                desktop_width: section.settings.gallery_desktop_width,
                mobile_width: gallery_mobile_width,
                enable_zoom: section.settings.enable_zoom,
                index: 0
              -%}
            {%- else -%}
              <div class="product-gallery-item" style="padding-top: 100%">
                {%- render 'lazy-svg',
                  image: 'product-1',
                  ratio: section.settings.gallery_aspect_ratio,
                  class: 'svg-placeholder svg-placeholder--background'
                %}
              </div>
            {%- endunless -%}
          {%- else -%}
            {% # theme-check-disable UndefinedObject %}
            {%- liquid
              for media in product.media
                render 'product-media', media: media, enable_zoom: section.settings.enable_zoom, loop: section.settings.enable_video_looping, index: forloop.index0, aspect_ratio: section.settings.gallery_aspect_ratio, fit: section.settings.gallery_fit, layout: section.settings.gallery_layout, desktop_width: section.settings.gallery_desktop_width, mobile_width: gallery_mobile_width, autoplay: section.settings.enable_video_autoplay, video_fit: section.settings.video_fit
                if media.media_type == 'external_video' or media.media_type == 'video'
                  if video_script == blank
                    assign video_script = true
                  endif
                endif
              endfor
            -%}
            {% # theme-check-enable UndefinedObject %}
          {%- endif -%}
        </div>

        {%- if product.media.size > 1 -%}</css-slider>{%- endif -%}

        {%- if section.settings.show_thumbnails and product.media.size > 1 -%}
          <div
            class="product-gallery__thumbnails {% if section.settings.gallery_style contains 'scroll' %} hide portable-show {% endif %}"
            aria-hidden="true"
            style="--border-radius: {{ section.settings.border_radius | at_most: 5 }}px"
          >
            <div class="product-gallery__thumbnails-holder">
              {%- for media in product.media -%}
                <button
                  class="thumbnail element--border-radius"
                  data-index="{{ forloop.index0 }}"
                  {% if section.settings.show_thumbnails %}
                    tabindex="0"
                  {% endif %}
                >
                  {%- render 'lazy-image-small',
                    image: media.preview_image,
                    aspect_ratio: settings.cart_image_ratio,
                    fit: settings.cart_image_fit,
                    class: 'thumbnail__image'
                  -%}
                  {%- if media.media_type == 'video' or media.media_type == 'external_video' -%}
                    <span class="thumbnail__badge">{%- render 'theme-symbols', icon: 'badge-video-thumbnail' -%}</span>
                  {%- elsif media.media_type == 'model' -%}
                    <span class="thumbnail__badge">{%- render 'theme-symbols', icon: 'badge-model-thumbnail' -%}</span>
                  {%- endif -%}
                </button>
              {%- endfor -%}
            </div>
          </div>
        {%- endif -%}

        {%- assign first_3d_model = product.media | where: 'media_type', 'model' | first -%}

        {%- if first_3d_model -%}
          <div class="fullwidth text-align--center">
            <button
              title="{{ 'products.page.view_in_space_label' | t }}"
              class="button button--small button--icon button--outline product-gallery__view-in-space"
              data-shopify-xr
              data-shopify-first-model3d-id="{{ first_3d_model.id }}"
              data-shopify-model3d-id="{{ first_3d_model.id }}"
              data-shopify-title="{{ product.title | escape }}"
              data-shopify-xr-hidden
            >
              <span aria-hidden="true" class="button__icon">{%- render 'theme-symbols', icon: 'model-button' -%}</span>
              <span class="product-gallery__view-in-space-text">{{ 'products.page.view_in_space' | t }}</span>
            </button>

            <link
              id="ModelViewerStyle"
              rel="stylesheet"
              href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
              media="print"
              onload="this.media='all'"
            >
            <script src="{{ 'component-product-model.js' | asset_url }}" defer></script>
          </div>
        {%- endif -%}
      </div>
    </div>

    <div class="product-text {{ text_class }} element--is-sticky remove-empty-space">
      <div class="element--hide-on-portable gutter-bottom--small">
        {%- render 'breadcrumb',
          container: '',
          vertical_space: '',
          style: 'breadcrumb-main--scroll breadcrumb-main--smaller'
        -%}
      </div>
      {%- assign product_form_id = 'product-form-' | append: section.id -%}

      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when '@app' -%}
            <div class="has-bg-style--{{ section.settings.style }}" {{ block.shopify_attributes }}>
              {%- render block -%}
            </div>

          {%- when 'variant_metafield' -%}
            <div
              class="product-variant-metafield rte"
              data-key="{{ block.settings.key }}"
              data-js-variant-metafield
              {{ block.shopify_attributes }}
              data-update-block="variant-metafield-main"
            >
              {%- assign metafield_reference = block.settings.key -%}
              {%- if metafield_reference != blank -%}
                {%- assign metafield_keys = metafield_reference | split: '.' -%}
                {%- assign metafield_value = current_variant.metafields[metafield_keys[0]][metafield_keys[1]] -%}
                {%- if metafield_value != blank -%}
                  <div class="product-variant-metafield__container">
                    {%- if block.settings.title != blank %}
                      <span class="product-variant-metafield__title text-weight--medium">
                        {{- block.settings.title | escape -}}
                      </span>
                    {%- endif -%}
                    {{ metafield_value | metafield_tag }}
                  </div>
                {%- endif -%}
              {%- endif -%}
            </div>

          {%- when 'divider' -%}
            <span
              class="divider"
              style="
                --divider-height: {{ block.settings.height }}px;
                --divider-color: {{ block.settings.color }};
                --divider-style: {{ block.settings.style }};
              "
              {{ block.shopify_attributes }}
              >&nbsp;</span
            >

          {%- when 'image' -%}
            <div
              class="product-image-block product-text-element--with-borders"
              style="--border-radius-cards: {{ block.settings.image_border_radius }}px"
              {{ block.shopify_attributes }}
            >
              <div class="element--overflow-hidden">
                {%- if block.settings.link -%}
                  <a
                    href="{{ block.settings.link }}"
                    {% unless block.settings.open_in_new_window == false %}
                      target="_blank"
                    {% endunless %}
                  >
                {%- endif -%}

                {%- unless block.settings.image == blank -%}
                  {%- liquid
                    if block.settings.link != blank
                      assign animation_class = 'lazy-image--to-reveal lazy-image--zoom-animation'
                    else
                      assign animation_class = 'lazy-image--to-reveal'
                    endif

                    if block.settings.mobile_image != blank
                      assign desk_image_class = animation_class | append: ' lap-hide'
                      assign mobile_image_class = animation_class | append: ' hide lap-show'
                      render 'lazy-image', image: block.settings.mobile_image, sizes: 'sizes="(max-width: 767px) calc(100vw - 20px), 50vw"', class: mobile_image_class
                    endif

                    render 'lazy-image', image: block.settings.image, sizes: 'sizes="(max-width: 767px) calc(100vw - 20px), 50vw"', class: desk_image_class
                  -%}

                {%- else -%}
                  {%- render 'lazy-svg', image: 'hero-apparel-1', class: 'onboardig-svg' -%}
                {%- endunless -%}

                {%- if block.settings.link -%}
                  </a>
                {%- endif -%}
              </div>
            </div>

          {%- when 'size_guide' -%}
            {%- liquid
              assign show_block = true
              if block.settings.hide_block_if == true and block.settings.page == blank
                assign show_block = false
              endif
            -%}

            {%- if show_block -%}
              <div class="product-size-chart" {{ block.shopify_attributes }}>
                {% # theme-check-disable %}

                {%- liquid
                  if block.settings.has_icon
                    assign icon_class = 'size-chart-link--has-icon'
                  endif
                -%}

                {%- if block.settings.page != blank -%}
                  <a
                    class="size-chart-link {% if block.settings.open_mode == "popup" %} js-toggle-size-chart-modal {% endif %} {{ icon_class }}"
                    href="{{ block.settings.page.url }}"
                    {% if block.settings.open_mode == 'blank' %}
                      target="_blank"
                    {% endif %}
                  >
                {%- else -%}
                  <span class="size-chart-link {{ icon_class }}">
                {%- endif -%}

                {%- if block.settings.has_icon -%}
                  {%- render 'theme-symbols', icon: 'size-chart' -%}
                {%- endif -%}

                <span class="text-animation--underline-thin">{{ block.settings.label | escape }}</span>

                {%- if block.settings.page != blank -%}
                  </a>
                {%- else -%}
                  </span>
                {%- endif -%}

                {% # theme-check-enable %}

                <div id="size-chart-modal" aria-hidden="true" class="hide">
                  <div class="size-chart-modal">
                    {%- if block.settings.open_mode == 'popup' -%}
                      <div class="page-popup">
                        <div class="section-heading__title text-font--secondary text-size--large gutter-bottom--small">
                          {{ pages[block.settings.page].title | escape }}
                        </div>
                        <div class="rte">
                          {{ pages[block.settings.page].content }}
                        </div>
                      </div>
                    {%- endif -%}

                    <div class="basicLightboxClose basicLightboxCloseWithIcon">
                      {%- render 'theme-symbols', icon: 'close' -%}
                    </div>
                  </div>
                </div>

                <script
                  src="{{ 'component-lightbox.js' | asset_url }}"
                  defer
                  onload="basicLightbox.create(document.getElementById('size-chart-modal'),{trigger:document.querySelector('.js-toggle-size-chart-modal')});"
                ></script>
                {{ 'component-lightbox.css' | asset_url | stylesheet_tag }}
              </div>
            {%- endif -%}

          {%- when 'complementary' -%}
            <product-recommendations
              class="sidebar-widget sidebar-widget--{{ block.settings.style }}"
              data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit=10&intent=complementary"
              {{ block.shopify_attributes }}
              style="display:block!important"
            >
              {%- if recommendations.performed and recommendations.products_count > 0 -%}
                <span class="sidebar-widget__title">{{ block.settings.heading | escape }}</span>
                <div class="sidebar-widget__content">
                  {%- for product in recommendations.products -%}
                    <div class="product-item-compact" data-js-product-item>
                      <div class="product-item-compact__image product-item-compact__image--rounded">
                        <a href="{{ product.url }}" class="">
                          {%- render 'lazy-image-small',
                            image: product.featured_media,
                            aspect_ratio: 1,
                            class: 'lazy-image--scale-animation'
                          -%}
                        </a>
                      </div>

                      <div class="product-item-compact__details">
                        {%- if block.settings.show_price -%}
                          <div class="product-item-compact__price">
                            <span>
                              {%- liquid
                                if product.price_varies
                                  assign product_price = product.price_min | money | append: iso_code
                                  if product.compare_at_price > product.price
                                    echo 'products.grid.on_sale_from_html' | t: price: product_price
                                  else
                                    echo 'products.grid.from_text_html' | t: price: product_price
                                  endif
                                else
                                  echo product.price | money | append: iso_code
                                endif
                              -%}
                            </span>
                            <del>
                              {%- liquid
                                if product.compare_at_price > product.price and product.price_varies == false
                                  echo product.compare_at_price | money | append: iso_code | prepend: '<span>' | append: '</span>'
                                endif
                              -%}
                            </del>
                          </div>
                          {%- assign product_list_variant = product.selected_or_first_available_variant -%}
                          {%- if product_list_variant.unit_price_measurement -%}
                            <span
                              class="cart-item__unit-price text-size--small text-color--opacity"
                              style="display:block"
                            >
                              {{ product_list_variant.unit_price | money | append: iso_code }} /
                              {% if product_list_variant.unit_price_measurement.reference_value != 1 %}
                                {{ product_list_variant.unit_price_measurement.reference_value }}
                              {% endif %}
                              {{ product_list_variant.unit_price_measurement.reference_unit }}
                            </span>
                          {%- endif -%}
                        {%- endif -%}

                        <a href="{{ product.url }}" class="">
                          <span class="text-animation--underline-thin text-weight--bold">
                            {{- product.title | escape -}}
                          </span>
                        </a>

                        {%- if block.settings.show_vendor -%}
                          <div class="product-item-compact__vendor text-color--opacity text-size--small">
                            {{ product.vendor }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.show_rating -%}
                          <div>
                            {%- render 'product-rating', vendor: settings.reviews_app, product: product -%}
                          </div>
                        {%- endif -%}
                      </div>
                    </div>
                  {%- endfor -%}
                </div>
              {%- endif -%}
            </product-recommendations>

          {%- when 'products_list' -%}
            {%- unless block.settings.select_products == blank -%}
              <div
                class="sidebar-widget sidebar-widget--{{ block.settings.style }}"
                {{ block.shopify_attributes }}
              >
                <span class="sidebar-widget__title">{{ block.settings.heading | escape }}</span>
                <div class="sidebar-widget__content">
                  {%- for product in block.settings.select_products -%}
                    <div class="product-item-compact" data-js-product-item>
                      <div class="product-item-compact__image product-item-compact__image--rounded">
                        <a href="{{ product.url }}" class="">
                          {%- render 'lazy-image-small',
                            image: product.featured_media,
                            aspect_ratio: 1,
                            class: 'lazy-image--scale-animation'
                          -%}
                        </a>
                      </div>

                      <div class="product-item-compact__details">
                        {%- if block.settings.show_price -%}
                          <div class="product-item-compact__price">
                            <span>
                              {%- liquid
                                if product.price_varies
                                  assign product_price = product.price_min | money | append: iso_code
                                  if product.compare_at_price > product.price
                                    echo 'products.grid.on_sale_from_html' | t: price: product_price
                                  else
                                    echo 'products.grid.from_text_html' | t: price: product_price
                                  endif
                                else
                                  echo product.price | money | append: iso_code
                                endif
                              -%}
                            </span>
                            <del>
                              {%- liquid
                                if product.compare_at_price > product.price and product.price_varies == false
                                  echo product.compare_at_price | money | append: iso_code | prepend: '<span>' | append: '</span>'
                                endif
                              -%}
                            </del>
                          </div>
                          {%- assign product_list_variant = product.selected_or_first_available_variant -%}
                          {%- if product_list_variant.unit_price_measurement -%}
                            <span
                              class="cart-item__unit-price text-size--small text-color--opacity"
                              style="display:block"
                            >
                              {{ product_list_variant.unit_price | money | append: iso_code }} /
                              {% if product_list_variant.unit_price_measurement.reference_value != 1 %}
                                {{ product_list_variant.unit_price_measurement.reference_value }}
                              {% endif %}
                              {{ product_list_variant.unit_price_measurement.reference_unit }}
                            </span>
                          {%- endif -%}
                        {%- endif -%}

                        <a href="{{ product.url }}" class="">
                          <span class="text-animation--underline-thin text-weight--bold">
                            {{- product.title | escape -}}
                          </span>
                        </a>

                        {%- if block.settings.show_vendor -%}
                          <div class="product-item-compact__vendor text-color--opacity text-size--small">
                            {{ product.vendor }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.show_rating -%}
                          <div>
                            {%- render 'product-rating', vendor: settings.reviews_app, product: product -%}
                          </div>
                        {%- endif -%}
                      </div>
                    </div>
                  {%- endfor -%}
                </div>
              </div>
            {%- endunless -%}

          {%- when 'product_promotion' -%}
            {%- liquid
              assign promo_product = block.settings.product
              assign show_block = true
              if block.settings.hide_block_if == true and promo_product == blank
                assign show_block = false
              endif
            -%}

            {%- if show_block -%}
              <div class="sidebar-widget sidebar-widget--{{ block.settings.style }}" {{ block.shopify_attributes }}>
                <span class="sidebar-widget__title">{{ block.settings.heading | escape }}</span>
                <div class="sidebar-widget__content">
                  <div class="product-item-compact">
                    <div class="product-item-compact__image">
                      <a href="{{ promo_product.url }}" class="">
                        {%- render 'lazy-image-small',
                          image: promo_product.featured_media,
                          aspect_ratio: settings.cart_image_ratio,
                          fit: settings.cart_image_fit,
                          class: 'lazy-image--scale-animation'
                        -%}
                      </a>
                    </div>

                    <div class="product-item-compact__details">
                      <div class="product-item-compact__price">
                        {%- if block.settings.show_price_free -%}
                          <span class="text-weight--medium">{{ 'products.page.free_product' | t }}</span>
                          <del>{{ promo_product.price | money | append: iso_code }}</del>
                        {%- else -%}
                          <span>
                            {%- liquid
                              if promo_product.price_varies
                                assign promo_produce_price = promo_product.price_min | money | append: iso_code
                                if promo_product.compare_at_price > promo_product.price
                                  echo 'products.grid.on_sale_from_html' | t: price: promo_produce_price
                                else
                                  echo 'products.grid.from_text_html' | t: price: promo_produce_price
                                endif
                              else
                                echo promo_product.price | money | append: iso_code
                              endif
                            -%}
                          </span>
                          <del>
                            {%- liquid
                              if promo_product.compare_at_price > product.price and promo_product.price_varies == false
                                echo promo_product.compare_at_price | money | append: iso_code | prepend: '<span>' | append: '</span>'
                              endif
                            -%}
                          </del>
                          {%- assign product_list_variant = product.selected_or_first_available_variant -%}
                          {%- if product_list_variant.unit_price_measurement -%}
                            <span
                              class="cart-item__unit-price text-size--small text-color--opacity"
                              style="display:block"
                            >
                              {{ product_list_variant.unit_price | money | append: iso_code }} /
                              {% if product_list_variant.unit_price_measurement.reference_value != 1 %}
                                {{ product_list_variant.unit_price_measurement.reference_value }}
                              {% endif %}
                              {{ product_list_variant.unit_price_measurement.reference_unit }}
                            </span>
                          {%- endif -%}
                        {%- endif -%}
                      </div>

                      <a href="{{ promo_product.url }}" class="">
                        <span class="text-animation--underline-thin text-weight--bold">
                          {{- promo_product.title | escape -}}
                        </span>
                      </a>

                      {%- if block.settings.text %}
                        <div class="product-item-compact__vendor text-color--opacity text-size--small">
                          {{ block.settings.text | escape }}
                        </div>
                      {%- endif -%}
                    </div>
                  </div>
                </div>
              </div>
            {%- endif -%}

          {%- when 'vendor' -%}
            <span
              class="product__subtitle rte"
              {{ block.shopify_attributes }}
            >
              {{ product.vendor | link_to_vendor }}
            </span>

          {%- when 'badges' -%}
            <div class="product__badges" {{ block.shopify_attributes }}>
              {%- render 'product-badges', product: product -%}
            </div>

          {%- when 'text' -%}
            <span
              class="product__subtitle {{ block.settings.text_size }} {{ block.settings.text_style }}"
              style="
                {% if block.settings.text_transform %} text-transform: uppercase; {% endif %}
                {% if block.settings.text_color != "rgba(0,0,0,0)" %} color: {{ block.settings.text_color }}; {% endif %}
              "
              {{ block.shopify_attributes }}
            >
              {{ block.settings.text }}
            </span>

          {%- when 'title' -%}
            <h1 class="product__title heading-size--page-title" {{ block.shopify_attributes }}>
              {{ product.title | escape }}
            </h1>

          {%- when 'price' -%}
            <div {{ block.shopify_attributes }} data-update-block="price-compact-main" class="main-product-price">
              <span class="show-block-if-variant-selected">
                {%- render 'product-price', variant: current_variant, target: current_variant, id: section.id -%}
              </span>
              {%- unless default_to_first_variant -%}
                <span class="show-block-if-variant-not-selected-yet">
                  {%- render 'product-price',
                    variant: current_variant,
                    target: product,
                    product_price_varies: product.price_varies,
                    id: section.id
                  -%}
                </span>
              {%- endunless -%}
            </div>

          {%- when 'tax_info' -%}
            {%- if cart.taxes_included or shop.shipping_policy.body != blank -%}
              <div class="product-policies text-size--small" data-product-policies {{ block.shopify_attributes }}>
                {% if cart.taxes_included %}
                  {{ 'products.page.include_taxes' | t }}
                {%- endif -%}
                {%- if shop.shipping_policy.body != blank -%}
                  {{ 'products.page.shipping_policy_html' | t: link: shop.shipping_policy.url }}
                {%- endif -%}
              </div>
            {%- endif -%}

          {%- when 'sku_barcode' -%}
            <div
              class="product__sku-barcode text-size--small show-block-if-variant-selected"
              data-update-block="sku-barcode-main"
              {{ block.shopify_attributes }}
            >
              {%- if current_variant.sku != blank -%}
                <span class="product__sku">
                  {{ 'products.page.sku' | t -}}
                  {{- current_variant.sku | escape }}
                </span>
              {%- endif -%}
              {%- if current_variant.barcode != empty -%}
                <span class="product__barcode" data-js-product-barcode>
                  {{ 'products.page.barcode' | t -}}
                  {{- current_variant.barcode | escape }}
                </span>
              {%- endif -%}
            </div>

          {%- when 'description' -%}
            {%- if product.description != blank -%}
              {%- if block.settings.product_description_truncated != 'full' -%}
                <show-more
                  class="show-more"
                  style="--height:{{ block.settings.product_description_truncated }}px"
                  data-height="{{ block.settings.product_description_truncated }}"
                >
                  <span class="js-show-more show-more_toggler text-decoration--underline">
                    {{ 'general.accessibility_labels.show_more' | t }}
                  </span>
                  <div class="show-more_panel">
              {%- endif -%}

              {%- if block.settings.collapsible -%}
                <toggle-tab class="toggle" {{ block.shopify_attributes }}>
                  <span
                    class="toggle__title"
                    data-js-title
                    tabindex="0"
                    aria-expanded="false"
                    role="button"
                    aria-controls="toggle-{{ block.id }}"
                  >
                    {{- block.settings.heading | escape -}}
                  </span>
                  <div
                    id="toggle--{{ block.id }}"
                    data-js-content
                    class="toggle__content rte remove-empty-space"
                    role="region"
                  >
                    {{ product.description }}
                  </div>
                </toggle-tab>
              {%- else -%}
                <div class="product__description rte remove-empty-space" {{ block.shopify_attributes }}>
                  {{ product.description }}
                </div>
              {%- endif -%}

              {%- if block.settings.product_description_truncated != 'full' -%}
                </div>
                </show-more>
                <script src="{{ 'component-show-more.js' | asset_url }}" defer></script>
              {%- endif -%}
            {%- endif -%}

          {%- when 'product_siblings' -%}
            {%- if block.settings.products != blank -%}
              <div
                class="sidebar-widget sidebar-widget--{{ block.settings.style }}"
                {{ block.shopify_attributes }}
              >
                <span class="sidebar-widget__title">{{ block.settings.heading | escape }}</span>

                <div class="sidebar-widget__content">
                  <div class="product-variants product-variants--thumbnails">
                    <div class="product-variant__container" style="margin-top:0">
                      {%- for sibling_product in block.settings.products -%}
                        <a
                          href="{{ sibling_product.url }}"
                          class="
                            product-variant__item
                            {% if product.handle == sibling_product.handle %} product-variant__item--current {% endif %}
                          "
                          title="{{ sibling_product.title | escape }}"
                        >
                          <div class="product-variant__item-image">
                            {%- if sibling_product.featured_media != blank
                              or settings.product_card_fallback_image != blank
                            -%}
                              {%- liquid
                                assign sibling_image = sibling_product.featured_media
                                if sibling_image == blank
                                  assign sibling_image = settings.product_card_fallback_image
                                endif
                                render 'lazy-image-small', image: sibling_image, aspect_ratio: block.settings.aspect_ratio, sizes: '(max-width: 767px) 80px, 100px', class: 'lazy-image--scale-animation'
                              -%}
                            {%- else -%}
                              <span
                                class="onboarding-svg"
                                style="padding-top: {{ 100 | divided_by: block.settings.aspect_ratio }}%;"
                              >
                                {{- 'product-1' | placeholder_svg_tag -}}
                              </span>
                            {%- endif -%}
                          </div>
                        </a>
                      {%- endfor -%}
                    </div>
                  </div>
                </div>
              </div>
            {%- endif -%}

          {%- when 'variant_picker' -%}
            {%- assign color_label = settings.color_swatches_labels | split: ',' -%}

            <div
              class="sidebar-widget sidebar-widget--{{ block.settings.style }}"
              {% if product.has_only_default_variant %}
                style="display:none"
              {% endif %}
              {% if product.available == false and block.settings.unavailable_variants == 'hide' %}
                style="display:none"
              {% endif %}
            >
              {%- unless block.settings.heading == blank -%}
                <span class="sidebar-widget__title">{{ block.settings.heading | escape }}</span>
              {%- endunless -%}

              <div class="sidebar-widget__content">
                <product-variants
                  data-main-product-variants
                  data-main-product-page-variants
                  data-variants="{{ product.options_with_values.size }}"
                  data-hide-variants="
                    {%- liquid
                      if block.settings.unavailable_variants == 'disable'
                        echo 'disable'
                      elsif block.settings.unavailable_variants == 'show'
                        echo 'true'
                      else
                        echo 'hide'
                      endif
                    -%}
                  "
                  data-url="{{ product.url }}"
                  data-id="{{ section.id }}"
                  data-helper-id="{{ section.id }}"
                  data-style="{{ block.settings.variants_style }}"
                  {% if block.settings.unavailable_variants == 'hide' %}
                    class="product-variants--hide-unavailable"
                  {% endif %}
                  data-unavailable-variants="{{ block.settings.unavailable_variants }}"
                  {% unless default_to_first_variant %}
                    data-variant-required
                  {% endunless %}
                  {% unless product.has_only_default_variant %}
                    data-has-variants
                  {% elsif product.available == false %}
                    data-unavailable
                  {% endunless %}
                  {{ block.shopify_attributes }}
                >
                  <script type="application/json" data-js-variant-data data-update-block="variant-data-main-product">
                    {{ current_variant | json }}
                  </script>

                  <div
                    class="product-variants no-js-hidden"
                    {% if product.has_only_default_variant %}
                      style="display:none"
                    {% endif %}
                    {% if product.available == false and block.settings.unavailable_variants == 'hide' %}
                      style="display:none"
                    {% endif %}
                  >
                    {%- for option in product.options_with_values -%}
                      {%- assign option_downcased = option.name | downcase %}

                      <div
                        class="product-variant"
                        data-name="product-{{ option.name | escape | downcase | strip | handleize }}-{{ section.id }}"
                        data-js-product-variant
                      >
                        {%- liquid
                          assign swatch_count = option.values | map: 'swatch' | compact | size
                          if color_label contains option_downcased and block.settings.color_swatches
                            assign is_color = true
                          elsif block.settings.color_swatches and swatch_count > 0
                            assign is_color = true
                          else
                            assign is_color = false
                          endif
                        -%}

                        {%- if block.settings.variants_style == 'select' and is_color == blank -%}
                          <label
                            for="product-{{ option.name | escape | downcase | strip | handleize }}-{{ section.id }}"
                            class="product-variant__name text-size--small {% unless block.settings.variant_labels %} visually-hidden {% endunless %}"
                          >
                            {{- 'products.grid.select_variant' | t: variant: option.name -}}
                          </label>
                        {%- elsif block.settings.variant_labels -%}
                          <span class="product-variant__name text-size--small">
                            {{- 'products.grid.select_variant' | t: variant: option.name -}}
                          </span>
                        {%- endif -%}

                        {%- if is_color -%}
                          <div
                            class="product-variant__container product-variant__container--radio product-variant__container--radio--wrap"
                            data-js-product-variant-container="radio"
                          >
                            {%- render 'product-variant-options',
                              type: 'swatch',
                              option: option,
                              product: product,
                              default_to_first_variant: default_to_first_variant,
                              handle_unavailable_variants: block.settings.unavailable_variants,
                              current_variant: current_variant,
                              id: section.id
                            -%}
                          </div>

                          <span class="product-variant__item-text-label text-size--small text-line-height--small text-color--opacity">
                            {%- liquid
                              unless default_to_first_variant
                                echo 'products.grid.color_variants_count' | t: count: option.values.size
                              else
                                echo option.selected_value
                              endunless
                            -%}
                          </span>

                        {%- elsif block.settings.variants_style == 'select' -%}
                          <select
                            class="product-variant__container product-variant__container--select text-size--small"
                            id="product-{{ option.name | escape | downcase | strip | handleize }}-{{ section.id }}"
                            data-js-product-variant-container="select"
                          >
                            {%- render 'product-variant-options',
                              type: 'select',
                              option: option,
                              product: product,
                              default_to_first_variant: default_to_first_variant,
                              handle_unavailable_variants: block.settings.unavailable_variants,
                              current_variant: current_variant,
                              id: section.id
                            -%}
                          </select>

                        {%- else -%}
                          <div
                            class="product-variant__container product-variant__container--radio product-variant__container--radio--wrap"
                            data-js-product-variant-container="radio"
                          >
                            {%- render 'product-variant-options',
                              option: option,
                              product: product,
                              default_to_first_variant: default_to_first_variant,
                              handle_unavailable_variants: block.settings.unavailable_variants,
                              id: section.id
                            -%}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.unavailable_variants == 'hide'
                          and block.settings.variants_style != 'select'
                          or is_color
                        -%}
                          <span
                            class="product-variant__out-of-stock text-size--regular text-color--opacity hide"
                            aria-hidden="true"
                          >
                            {{- 'products.page.inventory.no_products' | t -}}
                          </span>
                        {%- endif -%}
                      </div>
                    {%- endfor -%}
                  </div>
                </product-variants>
              </div>
            </div>

          {%- when 'back_in_stock' -%}
            <div data-update-block="back-in-stock" {{ block.shopify_attributes }}>
              {%- if current_variant.available == false or request.design_mode -%}
                {%- if block.settings.back_in_stock_text -%}
                  <div class="text-size--regular">
                    {{ block.settings.back_in_stock_text }}
                  </div>
                {%- endif -%}

                <back-in-stock-form data-url="{{ product.url }}?section_id={{ section.id }}&variant={{ current_variant.id }}">
                  {%- assign form_id = 'alert-' | append: block.id -%}

                  {%- form 'contact', id: form_id, class: 'back-in-stock-form' -%}
                    {%- render 'form-errors', form: form -%}

                    {%- if form.posted_successfully? -%}
                      <p class="alert alert--success alert--icon" style="margin-top: 1rem;">
                        <span class="alert__icon">
                          {%- render 'theme-symbols', icon: 'alert-success' -%}
                        </span>
                        {{ block.settings.back_in_stock_success_message | escape }}
                      </p>
                    {%- endif -%}

                    {%- unless form.posted_successfully? -%}
                      <fieldset>
                        <input
                          type="hidden"
                          name="contact[Message]"
                          value="{{ block.settings.back_in_stock_email_message | escape }}"
                        >

                        <input type="hidden" name="contact[Product ID]" value="{{ product.id }}">
                        <input type="hidden" name="contact[Product Title]" value="{{ product.title | escape }}">
                        {%- if product.variants.size > 1 -%}
                          <input
                            type="hidden"
                            name="contact[Product Variant]"
                            value="{{ current_variant.title | escape }}"
                          >
                        {%- endif -%}
                        <input
                          type="hidden"
                          name="contact[Product URL]"
                          value="{{ shop.url | escape }}{{ current_variant.url }}"
                        >

                        <input type="hidden" name="contact[email]" value="{{ customer.email }}">

                        <div class="flex-buttons">
                          <input
                            type="email"
                            class="newsletter__input{% if form.errors contains 'email' %} error{% endif %}"
                            value="{% if customer %}{{ customer.email }}{% endif %}"
                            name="contact[email]"
                            placeholder="{{ 'general.newsletter.email_label' | t }}"
                            name="contact[email]"
                            id="Alert-{{ form_id }}"
                            autocorrect="off"
                            autocapitalize="off"
                            required
                          >

                          <button type="submit" id="Back-{{ form_id }}" class="button button--solid button--regular">
                            <span class="button__text">
                              {{ block.settings.back_in_stock_button_label | escape }}
                            </span>
                          </button>
                        </div>
                      </fieldset>
                    {%- endunless -%}
                  {%- endform -%}
                </back-in-stock-form>
              {%- endif -%}
            </div>

          {%- when 'custom_property' -%}
            <div
              class="product-variant product-variants--{{ block.settings.field_type }}"
              data-js-custom-property
              {{ block.shopify_attributes }}
            >
              <div>
                <label class="product-variant__name text-size--small" for="{{ block.id }}">
                  {{ block.settings.title | escape }}
                  {%- if block.settings.field_required -%}*{%- endif -%}
                </label>

                {%- capture element_attributes -%}
                  id="{{ block.id }}"
                  class="product-variant-container" 
                  name="properties[{%- if block.settings.field_checkout -%}_{%- endif -%}{{ block.settings.title | escape }}]" 
                  form="{{ product_form_id }}"
                  {%- if block.settings.field_required -%} required {%- endif -%}
                  {%- if block.settings.field_type == 'text' and block.settings.field_text_character_limit != blank %} maxlength="{{ block.settings.field_text_character_limit }}" {%- endif -%}
                {%- endcapture -%}

                {%- case block.settings.field_type %}
                  {%- when 'select' %}
                    <select {{ element_attributes }}>
                      {%- if block.settings.field_dropdown_default -%}
                        <option value="" selected disabled>----</option>
                      {%- endif -%}
                      {%- assign line_item_dropdown_options = block.settings.field_dropdown_values | split: ',' -%}
                      {%- for option in line_item_dropdown_options -%}
                        <option value="{{ option | escape }}">{{ option | escape }}</option>
                      {%- endfor -%}
                    </select>

                  {%- when 'text' -%}
                    {%- if block.settings.field_text_long -%}
                      <textarea {{ element_attributes }}></textarea>
                    {%- else -%}
                      <input type="text" {{ element_attributes }}>
                    {%- endif -%}

                  {%- when 'checkbox' -%}
                    <input
                      type="checkbox"
                      class="styled-checkbox"
                      value="{{ block.settings.field_checkbox_value | escape }}"
                      {{ element_attributes }}
                    >
                {%- endcase %}
              </div>

              {%- if block.settings.field_required -%}
                <span class="product-variant__required text-size--small" style="display:none">
                  {{- 'products.page.required_line_item' | t -}}
                </span>
              {%- endif -%}
            </div>

          {%- when 'buy_buttons' -%}
            <div class="product-actions" {{ block.shopify_attributes }}>
              {%- if block.settings.show_price -%}
                <div
                  class="sidebar-widget sidebar-widget--{{ block.settings.style }} {% unless default_to_first_variant %} show-block-if-variant-selected {% endunless %} "
                  data-update-block="price-extended-main"
                >
                  {%- if block.settings.style == 'outline' -%}
                    <span class="sidebar-widget__title">{{ 'products.page.price' | t }}</span>
                  {%- endif -%}
                  <div class="sidebar-widget__content">
                    <div>
                      {%- render 'product-price',
                        variant: current_variant,
                        target: current_variant,
                        show_saving: true,
                        id: section.id
                      -%}
                    </div>
                  </div>
                </div>
              {%- endif -%}

              <product-form
                id="add-to-cart-{{ section.id }}"
                class="product-form"
                {% if settings.cart_action == 'overlay' %}
                  data-ajax-cart data-js-product-form
                {% endif %}
              >
                {%- form 'product',
                  product,
                  id: product_form_id,
                  class: 'form',
                  novalidate: 'novalidate',
                  data-type: 'add-to-cart-form'
                -%}
                  <input type="hidden" name="id" value="{{ current_variant.id }}">

                  {%- liquid
                    if product.gift_card? and block.settings.show_gift_card_recipient
                      render 'gift-card-recipent-form', product: product
                    endif
                  -%}

                  <div class="product__cart-functions">
                    <div class="flex-buttons">
                      {%- if block.settings.show_quantity_selector -%}
                        <product-quantity
                          class="
                            product-quantity quantity-selector-holder
                            {% if default_to_first_variant %} hide {% endif %}
                          "
                        >
                          <button
                            class="qty-button qty-minus no-js-hidden"
                            aria-label="{{ 'general.accessibility_labels.decrease_quantity' | t }}"
                            role="button"
                            controls="qty-{{ section.id }}"
                          >
                            {%- render 'theme-symbols', icon: 'minus' -%}
                          </button>
                          <label for="qty-{{ section.id }}" class="visually-hidden">
                            {{- 'general.accessibility_labels.quantity' | t -}}
                          </label>
                          <input
                            type="number"
                            name="quantity"
                            value="1"
                            min="1"
                            class="qty qty-selector product__quantity"
                            id="qty-{{ section.id }}"
                          >
                          <button
                            class="qty-button qty-plus no-js-hidden"
                            aria-label="{{ 'general.accessibility_labels.increase_quantity' | t }}"
                            role="button"
                            controls="qty-{{ section.id }}"
                          >
                            {%- render 'theme-symbols', icon: 'plus' -%}
                          </button>
                        </product-quantity>
                      {%- endif -%}

                      {%- if block.settings.color_text_buttons != 'rgba(0,0,0,0)' -%}
                        <style>
                          #add-to-cart-{{ section.id }} .button--product {
                            --color-text-main: {{ block.settings.color_text_buttons }}; {%- liquid
                              assign brightness_product_button = block.settings.color_text_buttons | color_brightness
                              if brightness_product_button > 150
                                assign color_foreground_product_button = '#000'
                              else
                                assign color_foreground_product_button = '#fff'
                              endif
                            -%}
                            --color-foreground-main: {{ color_foreground_product_button }};
                          }
                        </style>
                      {%- endif -%}

                      <button
                        type="submit"
                        name="add"
                        class="
                          add-to-cart button button--solid button--product button--loader button--move
                          {% unless current_variant.available %} disabled {% endunless %}
                          {% unless default_to_first_variant %} disabled {% endunless %}
                        "
                        data-js-product-add-to-cart
                        data-main-product-add-to-cart
                      >
                        <span
                          class="button__text"
                          data-js-product-add-to-cart-text
                          {% if block.settings.show_preorder %}
                            data-show-preorder-wording
                          {% endif %}
                        >
                          {%- liquid
                            unless default_to_first_variant
                              if product.available
                                echo 'products.grid.choose_variant_first' | t
                              else
                                echo 'products.page.inventory.sold_out_variant' | t
                              endif
                            else
                              if current_variant.available
                                unless block.settings.show_preorder
                                  echo 'products.page.add_to_cart_button' | t
                                else
                                  echo 'products.page.preorder_button' | t
                                endunless
                              elsif current_variant == null
                                echo 'products.page.inventory.unavailable_variant' | t
                              else
                                echo 'products.page.inventory.sold_out_variant' | t
                              endif
                            endunless
                          -%}
                        </span>
                        <span class="button__preloader">
                          <svg class="button__preloader-element" viewBox="25 25 50 50">
                            <circle cx="50" cy="50" r="20" fill="none" stroke-width="4"/>
                          </svg>
                        </span>
                      </button>

                      {%- liquid
                        if product.gift_card? and block.settings.show_gift_card_recipient
                          assign show_dynamic_checkout = false
                        else
                          assign show_dynamic_checkout = block.settings.show_dynamic_checkout
                        endif
                        if show_dynamic_checkout
                          echo form | payment_button
                        endif
                      -%}
                    </div>
                  </div>
                {%- endform -%}
              </product-form>

              {%- form 'product', product, id: 'product-form-installment' -%}
                <input type="hidden" name="id" value="{{ current_variant.id }}">
                {{ form | payment_terms }}
              {%- endform -%}
            </div>

          {%- when 'inventory' -%}
            <div class="product-variant__quantity-holder" {{ block.shopify_attributes }}>
              <span
                class="product-variant__quantity"
                data-js-variant-quantity
                data-type="{{ block.settings.show_quantities }}"
                data-low-stock="{{ block.settings.low_inventory_threshold }}"
                data-high-stock="{{ block.settings.low_inventory_threshold | times: 2 }}"
              ></span>
              {%- if block.settings.show_progress_bar -%}
                <span class="product-variant__quantity-progress">
                  <span class="product-variant__quantity-progress-bar" data-js-variant-quantity-progress></span>
                </span>
              {%- endif -%}
              {%- if current_variant != null -%}
                <span
                  data-js-variant-quantity-data
                  data-inventory='
                    [{
                      "id": {{ current_variant.id }}{%- if current_variant.inventory_management != null -%},
                      "quantity": {{ current_variant.inventory_quantity }},
                      "inventory": "{{ current_variant.inventory_policy }}"{%- endif -%}
                      {%- if current_variant.available == false -%},"unavailable": true{%- endif -%}
                    }]
                  '
                ></span>
              {%- endif -%}
            </div>

          {%- when 'collapsible_tab' -%}
            {%- liquid
              assign show_block = true
              if block.settings.hide_block_if == true
                if block.settings.page == blank and block.settings.image == blank and block.settings.content == blank
                  assign show_block = false
                endif
              endif
            -%}
            {%- if show_block -%}
              <toggle-tab class="toggle" {{ block.shopify_attributes }}>
                <span
                  class="toggle__title"
                  data-js-title
                  tabindex="0"
                  aria-expanded="false"
                  role="button"
                  aria-controls="toggle-{{ block.id }}"
                >
                  {{- block.settings.heading | escape -}}
                </span>
                <div
                  id="toggle--{{ block.id }}"
                  data-js-content
                  class="toggle__content rte remove-empty-space"
                  role="region"
                >
                  {%- liquid
                    echo block.settings.content
                    unless block.settings.page == blank
                      echo block.settings.page.content
                    endunless
                    unless block.settings.image == blank
                      assign sizes = 'sizes="(max-width: 948px) calc(100vw - 20px), (min-width: 949px) and (max-width: 1023px) calc(100vw - 200px), 25vw"'
                      render 'lazy-image', image: block.settings.image, type: 'image', alt: block.settings.title, sizes: sizes
                    endunless
                  -%}
                </div>
              </toggle-tab>
            {%- endif -%}

          {%- when 'pickup_availability' -%}
            <div
              class="pickup-availability-widget element--border-radius show-block-if-variant-selected no-js-hidden"
              {{ block.shopify_attributes }}
              data-update-block="pickup-availability-main"
            >
              <pickup-availability-widget data-id="{{ section.id }}">
                {%- render 'pickup-availability-widget',
                  product: product,
                  current_variant: current_variant,
                  include_sidebar: true
                %}
              </pickup-availability-widget>
            </div>

          {%- when 'rating' -%}
            <div {{ block.shopify_attributes }}>
              {%- render 'product-rating', vendor: settings.reviews_app, product: product -%}
            </div>

          {%- when 'custom_liquid' -%}
            <div class="product-custom-liquid" {{ block.shopify_attributes }}>
              {{ block.settings.custom_liquid }}
            </div>

          {%- when 'icons' -%}
            {%- liquid
              assign show_block = true
              if block.settings.hide_block_if == true and block.settings.icon_1_image == blank and block.settings.icon_1_label == blank
                assign show_block = false
              endif
            -%}

            {%- if show_block -%}
              <div class="product-icons-list" {{ block.shopify_attributes }}>
                {%- unless block.settings.title == blank -%}
                  <p class="text-size--large text-weight--bold">{{ block.settings.title | escape }}</p>
                {%- endunless -%}

                {%- capture product_icon_list -%}
                  {%- liquid
                    render 'product-icon-label', icon: block.settings.icon_1_image, label: block.settings.icon_1_label, style: 'pill--no-bg pill--large'
                    render 'product-icon-label', icon: block.settings.icon_2_image, label: block.settings.icon_2_label, style: 'pill--no-bg pill--large'
                    render 'product-icon-label', icon: block.settings.icon_3_image, label: block.settings.icon_3_label, style: 'pill--no-bg pill--large'
                    render 'product-icon-label', icon: block.settings.icon_4_image, label: block.settings.icon_4_label, style: 'pill--no-bg pill--large'
                    render 'product-icon-label', icon: block.settings.icon_5_image, label: block.settings.icon_5_label, style: 'pill--no-bg pill--large'
                    render 'product-icon-label', icon: block.settings.icon_6_image, label: block.settings.icon_6_label, style: 'pill--no-bg pill--large'
                  -%}
                {%- endcapture -%}

                {%- unless product_icon_list == blank -%}
                  <div class="product-icons-list-container">{{ product_icon_list }}</div>
                {%- endunless -%}
              </div>
            {%- endif -%}

          {%- when 'share' -%}
            <div class="product-sharing" {{ block.shopify_attributes }}>
              {%- liquid
                assign share_link = shop.url | append: product.url
                assign share_title = product.title | url_param_escape
                assign share_image = product.featured_media | image_url: width: 1024
              -%}

              <div class="site-sharing">
                <p class="text-size--large text-weight--bold">{{ 'general.sharing.title' | t }}</p>

                {%- if block.settings.share_on_facebook -%}
                  <a
                    href="//www.facebook.com/sharer.php?u={{ share_link }}"
                    target="_blank"
                    title="{{ 'general.accessibility_labels.share.facebook' | t }}"
                    class="text-with-icon text-with-icon--small"
                  >
                    <span aria-hidden="true" class="text-with-icon__icon">
                      {%- render 'theme-symbols', icon: 'facebook' -%}
                    </span>
                    <span class="text-animation--underline-thin">{{ 'general.sharing.facebook' | t }}</span>
                  </a>
                {%- endif -%}

                {%- if block.settings.share_on_x -%}
                  <a
                    href="//twitter.com/intent/tweet?text={{ share_title }}&amp;url={{ share_link }}"
                    target="_blank"
                    title="{{ 'general.accessibility_labels.share.twitter' | t }}"
                    class="text-with-icon text-with-icon--small"
                  >
                    <span aria-hidden="true" class="text-with-icon__icon">
                      {%- render 'theme-symbols', icon: 'twitter' -%}
                    </span>
                    <span class="text-animation--underline-thin">{{ 'general.sharing.twitter' | t }}</span>
                  </a>
                {%- endif -%}

                {%- if block.settings.share_on_pinterest -%}
                  <a
                    href="//pinterest.com/pin/create/button/?url={{ share_link }}&amp;media={{ share_image }}&amp;description={{ share_title }}"
                    target="_blank"
                    title="{{ 'general.accessibility_labels.share.pinterest' | t }}"
                    class="text-with-icon text-with-icon--small"
                  >
                    <span aria-hidden="true" class="text-with-icon__icon">
                      {%- render 'theme-symbols', icon: 'pinterest' -%}
                    </span>
                    <span class="text-animation--underline-thin">{{ 'general.sharing.pinterest' | t }}</span>
                  </a>
                {%- endif -%}

                {%- if block.settings.custom_share_link -%}
                  <share-link
                    class="share-link"
                    data-link-info="{{ share_title | url_decode }}"
                    data-link-url="{{ share_link }}"
                    data-link-text-copy="{{ 'general.sharing.copy_to_clipboard' | t }}"
                    data-link-text-copied="{{ 'general.sharing.url_copied_to_clipboard' | t }}"
                  >
                    <a
                      href="#"
                      target="_blank"
                      title="{{ 'general.sharing.copy_to_clipboard' | t }}"
                      class="text-with-icon text-with-icon--small"
                    >
                      <span aria-hidden="true" class="text-with-icon__icon">
                        {%- render 'theme-symbols', icon: 'share' -%}
                      </span>
                      <span class="text-animation--underline-thin">{{ 'products.page.share_link' | t }}</span>
                    </a>
                  </share-link>
                  <script src="{{ 'component-share-link.js' | asset_url }}" defer></script>
                {%- endif -%}
              </div>
            </div>

          {%- when 'cross_sell' -%}
            {%- liquid
              assign show_block = true
              if block.settings.hide_block_if == true and block.settings.product == blank
                assign show_block = false
              endif
            -%}

            {%- if show_block -%}
              <div class="product-recommendation" {{ block.shopify_attributes }}>
                {%- assign recommendation_id = 'product-recommendation-' | append: block.id -%}
                {%- render 'product-cross-sell',
                  heading: block.settings.heading,
                  product: block.settings.product,
                  id: recommendation_id,
                  widget_style: block.settings.style,
                  heading_position: 'inside',
                  layout: 'expanded'
                -%}
              </div>
            {%- endif -%}
        {%- endcase -%}
      {%- endfor -%}
    </div>

    {%- if first_3d_model -%}
      <script type="application/json" id="ProductJSON-{{ product.id }}">
        {{ product.media | where: 'media_type', 'model' | json }}
      </script>
    {%- endif -%}

    {%- if section.settings.sticky_add_to_cart and product.available and section.settings.sticky_atc_variants -%}
      <div style="display:none!important" data-update-block="price-sticky-main">
        <span class="show-block-if-variant-selected">
          {%- render 'product-price', variant: current_variant, target: current_variant, id: section.id -%}
        </span>
        {%- unless default_to_first_variant -%}
          <span class="show-block-if-variant-not-selected-yet">
            {%- render 'product-price',
              variant: current_variant,
              target: product,
              product_price_varies: product.price_varies,
              id: section.id
            -%}
          </span>
        {%- endunless -%}
      </div>
    {%- endif %}
  </product-page>

  {%- assign toggle_script = false -%}
  {%- for block in section.blocks -%}
    {%- if block.type == 'collapsible_tab' and toggle_script == false -%}
      {%- assign toggle_script = true -%}
      {{ 'component-toggle.css' | asset_url | stylesheet_tag }}
      <script src="{{ 'component-toggle.js' | asset_url }}" defer></script>
    {%- endif -%}
  {%- endfor -%}

  {%- if section.settings.enable_zoom -%}
    <script src="{{ 'component-product-image-zoom.js' | asset_url }}" defer></script>
  {%- endif -%}

  {%- if video_script -%}
    <script>
      KrownAssetLoader.loadScript('{{ "component-video.js" | asset_url }}');
    </script>
  {%- endif -%}

  <script src="{{ 'section-main-product.js' | asset_url }}" defer></script>
</div>

{%- if section.settings.sticky_add_to_cart and product.available -%}
  <sticky-add-to-cart
    {% if product.has_only_default_variant %}
      data-single
    {% elsif section.settings.sticky_atc_variants %}
      data-single
      {% unless product.has_only_default_variant %} data-single-with-options {% endunless %}
    {% else %}
      data-multiple
    {% endif %}
    data-id="product-{{ section.id }}"
    class="
      sticky-add-to-cart sticky-add-to-cart--{{ section.settings.sticky_atc_style }}
      sticky-add-to-cart--default-to-first-variant-{{ default_to_first_variant }}
    "
    style="
      --color-background-main: {{ section.settings.sticky_bar_bgcolor }};
      --color-text-main: {{ section.settings.sticky_bar_txtcolor }};
    "
  >
    <div class="container container--fullwidth-with-horizontal-space">
      <div class="sticky-add-to-cart__inner">
        <div class="sticky-add-to-cart__title">
          <span class="text-size--larger text-weight--medium">{{ product.title | escape }}</span>
        </div>
        <div class="sticky-add-to-cart__actions">
          <div class="sticky-add-to-cart__price text-size--large" data-js-atc-price>
            {%- if product.price_varies -%}
              <span class="sticky-add-to-cart__price-varies">
                {%- liquid
                  assign price = product.price | money | append: iso_code
                  if product.compare_at_price > product.price or product.compare_at_price_varies
                    echo 'products.grid.on_sale_from_html' | t: price: price
                  else
                    echo 'products.grid.from_text_html' | t: price: price
                  endif
                -%}
              </span>
            {%- else -%}
              <span class="sticky-add-to-cart__price-original text-weight--bold">
                {{- current_variant.price | money | append: iso_code -}}
              </span>
              {%- if current_variant.compare_at_price > current_variant.price -%}
                <del class="sticky-add-to-cart__price-compare">
                  {{- current_variant.compare_at_price | money | append: iso_code -}}
                </del>
              {%- endif -%}
            {%- endif -%}
          </div>
          <div class="sticky-add-to-cart__button">
            {%- if product.has_only_default_variant or section.settings.sticky_atc_variants -%}
              <button
                data-js-atc
                class="button button--solid button--move button--product button--loader {% if default_to_first_variant == false and product.has_only_default_variant == false %} show-block-if-variant-selected {% endif %}"
              >
                <span class="button__text">{{ 'products.page.add_to_cart_button' | t }}</span>
                <span class="button__preloader">
                  <svg class="button__preloader-element" viewBox="25 25 50 50">
                    <circle cx="50" cy="50" r="20" fill="none" stroke-width="4"/>
                  </svg>
                </span>
              </button>
              {%- if default_to_first_variant == false and product.has_only_default_variant == false -%}
                <button
                  data-js-choose
                  class="show-block-if-variant-not-selected-yet button button--outline button--move"
                >
                  <span class="button__text">{{ 'products.page.choose_options_button' | t }}</span>
                </button>
              {%- endif -%}
            {%- else -%}
              <button data-js-choose class="button button--outline button--move">
                <span class="button__text">{{ 'products.page.choose_options_button' | t }}</span>
              </button>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </sticky-add-to-cart>
{%- endif -%}

{% schema %}
{
  "name": "t:sections.local-extra-words.sections.main-product.name",
  "class": "mount-css-slider mount-toggles mount-product-page mount-show-more",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "divider",
      "name": "t:divider.label",
      "settings": [
        {
          "type": "range",
          "id": "height",
          "label": "t:sections.bundle-extra-words.sections.main-collection.settings.image_banner.height",
          "unit": "px",
          "min": 1,
          "max": 10,
          "step": 1,
          "default": 1
        },
        {
          "type": "header",
          "content": "t:divider.divider_design"
        },
        {
          "type": "color",
          "id": "color",
          "label": "t:divider.divider_color",
          "default": "rgba(0,0,0,1)"
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.pickup_availability.settings.style",
          "options": [
            {
              "value": "solid",
              "label": "t:divider.divider_style_solid"
            },
            {
              "value": "dotted",
              "label": "t:divider.divider_style_dotted"
            },
            {
              "value": "dashed",
              "label": "t:divider.divider_style_dashed"
            },
            {
              "value": "double",
              "label": "t:divider.divider_style_double"
            }
          ],
          "default": "solid"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.main-product.blocks.text.name",
      "settings": [
        {
          "id": "text",
          "type": "richtext",
          "default": "<p>Text block</p>",
          "label": "t:sections.main-product.blocks.text.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_size",
          "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.label",
          "options": [
            {
              "value": "text-size--small",
              "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__1"
            },
            {
              "value": "text-size--regular",
              "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__2"
            },
            {
              "value": "text-size--large",
              "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__3"
            }
          ],
          "default": "text-size--regular"
        },
        {
          "type": "select",
          "id": "text_style",
          "label": "t:sections.local-extra-words.sections.headings.text_style",
          "options": [
            {
              "value": "text-color--primary",
              "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__2"
            },
            {
              "value": "text-color--opacity",
              "label": "t:bundle-220.opacity"
            }
          ],
          "default": "text-color--primary"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.color.label",
          "default": "rgba(0,0,0,0)"
        },
        {
          "type": "checkbox",
          "id": "text_transform",
          "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.transform.label",
          "default": false
        }
      ]
    },
    {
      "type": "vendor",
      "name": "t:sections.local-extra-words.sections.product-card.blocks.vendor",
      "limit": 1
    },
    {
      "type": "badges",
      "name": "t:sections.bundle-extra-words.settings_schema.product_card.badges.name",
      "limit": 1
    },
    {
      "type": "title",
      "name": "t:sections.main-product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "price",
      "name": "t:sections.main-product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "tax_info",
      "name": "t:sections.local-extra-words.sections.main-product.blocks.tax_info.name",
      "limit": 1
    },
    {
      "type": "sku_barcode",
      "name": "t:sections.main-product.blocks.sku_barcode.name",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "t:sections.main-product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "t:sections.bundle-extra-words.settings_schema.labels.design"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Choose variants"
        },
        {
          "type": "radio",
          "id": "variants_style",
          "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.style.label",
          "options": [
            {
              "value": "radio",
              "label": "t:sections.split-extra-words.sections.main-product.settings.variants.options__1"
            },
            {
              "value": "select",
              "label": "t:sections.split-extra-words.sections.main-product.settings.variants.options__2"
            }
          ],
          "default": "radio"
        },
        {
          "type": "checkbox",
          "id": "variant_labels",
          "label": "t:bundle-240.show_variant_labels",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "color_swatches",
          "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.color_swatches.label",
          "info": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.color_swatches.info",
          "default": true
        },
        {
          "type": "paragraph",
          "content": "t:new_color_swatches"
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            },
            {
              "value": "none",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_5"
            }
          ],
          "default": "outline"
        },
        {
          "type": "header",
          "content": "t:sections.bundle-extra-words.sections.main-product-page.settings.functionality.header"
        },
        {
          "type": "select",
          "id": "unavailable_variants",
          "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.unavailable_variants.label",
          "options": [
            {
              "value": "disable",
              "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.unavailable_variants.option_2"
            },
            {
              "value": "hide",
              "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.unavailable_variants.option_1"
            },
            {
              "value": "show",
              "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.unavailable_variants.option_3"
            }
          ],
          "default": "show"
        }
      ]
    },
    {
      "type": "back_in_stock",
      "name": "t:back-in-stock-alert.header",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:back-in-stock-alert.info"
        },
        {
          "type": "paragraph",
          "content": "t:back-in-stock-alert.content"
        },
        {
          "type": "inline_richtext",
          "id": "back_in_stock_text",
          "label": "t:sections.split-extra-words.settings_schema.colors.settings.text",
          "default": "Enter your email address below to be notified when this product is back in stock."
        },
        {
          "type": "text",
          "id": "back_in_stock_button_label",
          "label": "t:sections.image-with-text.blocks.image.settings.button_label.label",
          "default": "Notify me"
        },
        {
          "type": "text",
          "id": "back_in_stock_success_message",
          "label": "t:back-in-stock-alert.succcess_message",
          "default": "Thanks! We will notify you when this product becomes available!"
        },
        {
          "type": "text",
          "id": "back_in_stock_email_message",
          "label": "t:back-in-stock-alert.email_message",
          "default": "I would like to be notified when this product is back in stock."
        }
      ]
    },
    {
      "type": "product_siblings",
      "name": "t:product-siblings.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:product-siblings.info"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.heading",
          "default": "Sibling products"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.related.settings.products"
        },
        {
          "type": "select",
          "id": "aspect_ratio",
          "label": "t:settings_schema.product-grid.settings.aspect_ratio.label",
          "options": [
            {
              "value": "1.33333",
              "label": "t:sections.gallery.settings.aspect_ratio.options__1.label"
            },
            {
              "value": "1",
              "label": "t:sections.gallery.settings.aspect_ratio.options__2.label"
            },
            {
              "value": "0.83333",
              "label": "t:sections.gallery.settings.aspect_ratio.options__3.label"
            },
            {
              "value": "0.666667",
              "label": "t:sections.gallery.settings.aspect_ratio.options__4.label"
            }
          ],
          "default": "1"
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            },
            {
              "value": "none",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_5"
            }
          ],
          "default": "outline"
        }
      ]
    },
    {
      "type": "custom_property",
      "name": "t:local-260.labels.custom_property",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:local-260.labels.custom_property_info"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.contact-form.blocks.field.settings.labels.label",
          "default": "Custom property"
        },
        {
          "type": "select",
          "id": "field_type",
          "label": "t:local-260.labels.type",
          "options": [
            {
              "value": "text",
              "label": "t:local-260.options.text"
            },
            {
              "value": "checkbox",
              "label": "t:local-260.options.checkbox"
            },
            {
              "value": "select",
              "label": "t:local-260.options.dropdown"
            }
          ],
          "default": "text"
        },
        {
          "type": "checkbox",
          "id": "field_required",
          "label": "t:local-260.labels.required",
          "info": "t:local-260.labels.required_info",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "field_checkout",
          "label": "t:local-260.labels.hide_at_checkout",
          "info": "t:local-260.labels.hide_at_checkout_info",
          "default": false
        },
        {
          "type": "header",
          "content": "t:local-260.labels.text_property_settings"
        },
        {
          "type": "checkbox",
          "id": "field_text_long",
          "label": "t:local-260.labels.allow_long_text",
          "default": false
        },
        {
          "type": "number",
          "id": "field_text_character_limit",
          "label": "t:local-260.labels.maximum_characters"
        },
        {
          "type": "header",
          "content": "t:local-260.labels.checkbox_property_settings"
        },
        {
          "type": "text",
          "id": "field_checkbox_value",
          "label": "t:local-260.labels.value",
          "info": "t:local-260.labels.appears_on_the_order_summary",
          "default": "Yes"
        },
        {
          "type": "header",
          "content": "t:local-260.labels.dropdown_property_settings"
        },
        {
          "type": "text",
          "id": "field_dropdown_values",
          "label": "t:local-260.labels.values",
          "info": "t:local-260.labels.values_info",
          "default": "Value 1,Value 2,Value 3"
        },
        {
          "type": "checkbox",
          "id": "field_dropdown_default",
          "label": "t:local-260.labels.default_value",
          "info": "If checked, none of the values will be selected by default.",
          "default": true
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.main-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_quantity_selector",
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_quantity_selector.label",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_preorder",
          "default": false,
          "label": "t:local-220.preorder"
        },
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.label",
          "info": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.info",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "default": false,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_gift_card_recipient.label",
          "info": "t:sections.main-product.blocks.buy_buttons.settings.show_gift_card_recipient.info"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.product-card.blocks.price"
        },
        {
          "type": "checkbox",
          "id": "show_price",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.buy_buttons.settings.show_price",
          "default": true
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            },
            {
              "value": "none",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_5"
            }
          ],
          "default": "outline"
        },
        {
          "type": "header",
          "content": "t:sections.split-extra-words.settings_schema.colors.headings.custom_colors"
        },
        {
          "type": "color",
          "id": "color_text_buttons",
          "label": "t:sections.split-extra-words.settings_schema.colors.settings.background",
          "default": "rgba(0,0,0,0)"
        }
      ]
    },
    {
      "type": "inventory",
      "name": "t:sections.bundle-extra-words.sections.main-product-page.settings.inventory.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "show_quantities",
          "label": "t:sections.main-product.blocks.variant_picker.settings.low_inventory_notification.label",
          "info": "t:sections.main-product.blocks.variant_picker.settings.low_inventory_notification.info",
          "options": [
            {
              "value": "always",
              "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.inventory.settings.show_block.always"
            },
            {
              "value": "below",
              "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.inventory.settings.show_block.low"
            }
          ],
          "default": "always"
        },
        {
          "type": "range",
          "id": "low_inventory_threshold",
          "step": 1,
          "min": 1,
          "max": 20,
          "default": 5,
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.inventory.settings.low_inventory_threshold"
        },
        {
          "type": "checkbox",
          "id": "show_progress_bar",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.inventory.settings.show_progress_bar",
          "default": true
        }
      ]
    },
    {
      "type": "description",
      "name": "t:sections.main-product.blocks.description.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "product_description_truncated",
          "visible_if": "{{ block.settings.collapsible == false }}",
          "label": "t:sections.main-product.blocks.description.settings.product_description_truncated.label",
          "options": [
            {
              "value": "full",
              "label": "t:sections.main-product.blocks.description.settings.product_description_truncated.options__1.label"
            },
            {
              "value": "120",
              "label": "t:sections.main-product.blocks.description.settings.product_description_truncated.options__2.label",
              "group": "t:sections.main-product.blocks.description.settings.product_description_truncated.info"
            },
            {
              "value": "200",
              "label": "t:sections.main-product.blocks.description.settings.product_description_truncated.options__3.label",
              "group": "t:sections.main-product.blocks.description.settings.product_description_truncated.info"
            },
            {
              "value": "280",
              "label": "t:sections.main-product.blocks.description.settings.product_description_truncated.options__4.label",
              "group": "t:sections.main-product.blocks.description.settings.product_description_truncated.info"
            }
          ],
          "default": "full"
        },
        {
          "type": "checkbox",
          "id": "collapsible",
          "visible_if": "{{ block.settings.product_description_truncated == 'full' }}",
          "label": "t:combine-260.labels.collapsible",
          "default": false
        },
        {
          "type": "text",
          "id": "heading",
          "visible_if": "{{ block.settings.collapsible == true }}",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Description"
        }
      ]
    },
    {
      "type": "rating",
      "name": "t:settings_schema.product-grid.settings.header__1.content",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:settings_schema.product-grid.settings.header__1.info"
        }
      ]
    },
    {
      "type": "share",
      "name": "t:sections.main-product.blocks.share.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main-product.blocks.share.settings.featured_image_info.content"
        },
        {
          "type": "paragraph",
          "content": "t:sections.main-product.blocks.share.settings.title_info.content"
        },
        {
          "type": "checkbox",
          "label": "t:local-260.labels.show_facebook",
          "id": "share_on_facebook",
          "default": true
        },
        {
          "type": "checkbox",
          "label": "t:local-260.labels.show_x",
          "id": "share_on_x",
          "default": true
        },
        {
          "type": "checkbox",
          "label": "t:local-260.labels.show_pinterest",
          "id": "share_on_pinterest",
          "default": true
        },
        {
          "type": "checkbox",
          "label": "t:local-260.labels.show_custom_link",
          "id": "custom_share_link",
          "default": false,
          "info": "t:local-260.labels.show_custom_link_info"
        }
      ]
    },
    {
      "type": "collapsible_tab",
      "name": "t:sections.main-product.blocks.collapsible_tab.name",
      "settings": [
        {
          "id": "heading",
          "type": "text",
          "info": "t:sections.main-product.blocks.collapsible_tab.settings.heading.info",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.heading.label",
          "default": "Collapsible tab"
        },
        {
          "id": "content",
          "type": "richtext",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.content.label",
          "default": "<p>Write relevant information about your products here.</p>"
        },
        {
          "id": "page",
          "type": "page",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.page.label"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.image.label"
        },
        {
          "type": "header",
          "content": "t:local-march-update.labels.dynamic_content.name"
        },
        {
          "type": "checkbox",
          "label": "t:local-march-update.labels.dynamic_content.hide_block",
          "id": "hide_block_if",
          "default": false
        }
      ]
    },
    {
      "type": "pickup_availability",
      "name": "t:sections.local-extra-words.sections.main-product.blocks.pickup_availability.name",
      "limit": 1
    },
    {
      "type": "icons",
      "name": "t:sections.local-extra-words.sections.main-product.blocks.icons.name",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Icons list"
        },
        {
          "type": "paragraph",
          "content": "t:sections.bundle-extra-words.sections.main-product-page.settings.icons.page_info"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_1"
        },
        {
          "type": "image_picker",
          "id": "icon_1_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_1_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_2"
        },
        {
          "type": "image_picker",
          "id": "icon_2_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_2_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_3"
        },
        {
          "type": "image_picker",
          "id": "icon_3_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_3_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_4"
        },
        {
          "type": "image_picker",
          "id": "icon_4_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_4_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_5"
        },
        {
          "type": "image_picker",
          "id": "icon_5_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_5_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.headers.icon_6"
        },
        {
          "type": "image_picker",
          "id": "icon_6_image",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon",
          "info": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.icon_info"
        },
        {
          "type": "text",
          "id": "icon_6_label",
          "label": "t:sections.local-extra-words.sections.main-product.blocks.icons.settings.label"
        },
        {
          "type": "header",
          "content": "t:local-march-update.labels.dynamic_content.name"
        },
        {
          "type": "checkbox",
          "label": "t:local-march-update.labels.dynamic_content.hide_block",
          "id": "hide_block_if",
          "default": false
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "t:sections.refactor_words.custom_code.name",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "t:sections.custom-liquid.settings.custom_liquid.label"
        }
      ]
    },
    {
      "type": "image",
      "name": "t:sections.local-extra-words.sections.image-section.name",
      "settings": [
        {
          "id": "image",
          "type": "image_picker",
          "label": "t:sections.gallery.blocks.image.settings.image.label"
        },
        {
          "id": "mobile_image",
          "type": "image_picker",
          "label": "t:sections.image.mobile_image"
        },
        {
          "type": "range",
          "id": "image_border_radius",
          "label": "t:sections.bundle-extra-words.sections.info_tabs.settings.borders.radius",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "default": 0
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.local-extra-words.sections.announcement-bar.blocks.content.settings.link"
        },
        {
          "type": "checkbox",
          "id": "open_in_new_window",
          "visible_if": "{{ block.settings.link != blank }}",
          "label": "t:sections.local-extra-words.sections.announcement-bar.blocks.content.settings.target",
          "default": false
        }
      ]
    },
    {
      "type": "complementary",
      "name": "t:sections.complementary_products.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.complementary_products.settings.paragraph.content"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Complementary products"
        },
        {
          "type": "checkbox",
          "id": "show_price",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_price",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_vendor",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_rating",
          "default": true
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            }
          ],
          "default": "outline"
        }
      ]
    },
    {
      "type": "product_promotion",
      "name": "t:sections.bundle-extra-words.sections.main-product-page.settings.promo.header",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Product promotion"
        },
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.promo.select_product"
        },
        {
          "type": "checkbox",
          "id": "show_price_free",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.promo.price",
          "default": true
        },
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.promo.text",
          "default": "Add product promotions or upsell individual items."
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            }
          ],
          "default": "outline"
        },
        {
          "type": "header",
          "content": "t:local-march-update.labels.dynamic_content.name"
        },
        {
          "type": "checkbox",
          "label": "t:local-march-update.labels.dynamic_content.hide_block",
          "id": "hide_block_if",
          "default": false
        }
      ]
    },
    {
      "type": "size_guide",
      "name": "t:sections.refactor_words.product-page.size_guide.label",
      "limit": 1,
      "settings": [
        {
          "id": "label",
          "type": "text",
          "default": "View size chart",
          "label": "t:sections.main-product.blocks.text.settings.text.label"
        },
        {
          "type": "checkbox",
          "id": "has_icon",
          "label": "t:sections.local-extra-words.sections.newsletter.show_icon",
          "default": true
        },
        {
          "id": "page",
          "type": "page",
          "label": "t:sections.refactor_words.product-page.size_guide.page"
        },
        {
          "type": "select",
          "id": "open_mode",
          "label": "t:sections.refactor_words.product-page.size_guide.options.label",
          "options": [
            {
              "value": "popup",
              "label": "t:sections.refactor_words.product-page.size_guide.options.option_1"
            },
            {
              "value": "self",
              "label": "t:sections.refactor_words.product-page.size_guide.options.option_2"
            },
            {
              "value": "blank",
              "label": "t:sections.refactor_words.product-page.size_guide.options.option_3"
            }
          ],
          "default": "popup"
        },
        {
          "type": "header",
          "content": "t:local-march-update.labels.dynamic_content.name"
        },
        {
          "type": "checkbox",
          "label": "t:local-march-update.labels.dynamic_content.hide_block",
          "id": "hide_block_if",
          "default": false
        }
      ]
    },
    {
      "type": "cross_sell",
      "name": "t:cross-selling.name",
      "limit": 5,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Cross sell"
        },
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.promo.select_product"
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            }
          ],
          "default": "outline"
        },
        {
          "type": "header",
          "content": "t:local-march-update.labels.dynamic_content.name"
        },
        {
          "type": "checkbox",
          "label": "t:local-march-update.labels.dynamic_content.hide_block",
          "id": "hide_block_if",
          "default": false
        }
      ]
    },
    {
      "type": "products_list",
      "name": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.header",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.local-extra-words.sections.headings.title",
          "default": "Products list"
        },
        {
          "type": "product_list",
          "id": "select_products",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.select_products",
          "limit": 8
        },
        {
          "type": "checkbox",
          "id": "show_price",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_price",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_vendor",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.upsell.show_rating",
          "default": true
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.container_design",
          "options": [
            {
              "value": "outline",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_3"
            },
            {
              "value": "primary",
              "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_4"
            }
          ],
          "default": "outline"
        }
      ]
    },
    {
      "type": "variant_metafield",
      "name": "t:variant_metafields.name",
      "settings": [
        {
          "type": "paragraph",
          "content": "t:variant_metafields.info"
        },
        {
          "type": "text",
          "id": "key",
          "label": "t:variant_metafields.label",
          "info": "custom.variant_metafield"
        },
        {
          "type": "text",
          "label": "t:sections.local-extra-words.sections.main-header.settings.promotion_block.title.label",
          "id": "title"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.header"
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.layout",
      "options": [
        {
          "value": "one-col slider",
          "label": "t:sections.local-extra-words.sections.columns.option__0",
          "group": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.style_slider"
        },
        {
          "value": "one-col scroll",
          "label": "t:sections.local-extra-words.sections.columns.option__0",
          "group": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.style_scroll"
        },
        {
          "value": "two-cols scroll",
          "label": "t:sections.local-extra-words.sections.columns.option__1",
          "group": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.style_scroll"
        }
      ],
      "default": "two-cols scroll",
      "info": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.layout_info"
    },
    {
      "type": "checkbox",
      "id": "enhance_first_image",
      "visible_if": "{{ section.settings.gallery_layout == 'two-cols scroll' }}",
      "label": "t:flex-cards.settings.enhance_first_image",
      "default": false
    },
    {
      "type": "select",
      "id": "gallery_desktop_width",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.desktop_width",
      "options": [
        {
          "value": "one-half",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_8"
        },
        {
          "value": "two-thirds",
          "label": "t:sections.bundle-extra-words.settings_schema.labels.options.option_9"
        }
      ],
      "default": "two-thirds"
    },
    {
      "type": "range",
      "id": "gallery_mobile_width",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.mobile_width",
      "min": 80,
      "max": 100,
      "step": 5,
      "default": 100
    },
    {
      "type": "checkbox",
      "id": "gallery_mobile_margin",
      "label": "t:bundle-240.product_gallery_mobile_padding",
      "default": false
    },
    {
      "type": "select",
      "id": "gallery_aspect_ratio",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.aspect_ratio",
      "options": [
        {
          "value": "1.33333",
          "label": "t:sections.gallery.settings.aspect_ratio.options__1.label",
          "group": "t:sections.gallery.settings.aspect_ratio.options__1.group"
        },
        {
          "value": "1",
          "label": "t:sections.gallery.settings.aspect_ratio.options__2.label",
          "group": "t:sections.gallery.settings.aspect_ratio.options__1.group"
        },
        {
          "value": "0.83333",
          "label": "t:sections.gallery.settings.aspect_ratio.options__3.label",
          "group": "t:sections.gallery.settings.aspect_ratio.options__1.group"
        },
        {
          "value": "0.666667",
          "label": "t:sections.gallery.settings.aspect_ratio.options__4.label",
          "group": "t:sections.gallery.settings.aspect_ratio.options__1.group"
        }
      ],
      "default": "1"
    },
    {
      "type": "checkbox",
      "id": "gallery_fit",
      "label": "t:sections.refactor_words.product-page.gallery_resize.option_1",
      "default": false
    },
    {
      "type": "range",
      "id": "gallery_padding",
      "label": "t:sections.refactor_words.product-page.gallery_padding.label",
      "min": 0,
      "max": 15,
      "step": 1,
      "default": 0,
      "unit": "%"
    },
    {
      "type": "color",
      "id": "gallery_background",
      "label": "t:sections.refactor_words.product-page.gallery_background.label",
      "info": "t:sections.refactor_words.product-page.gallery_background.info",
      "default": "rgba(0,0,0,0)"
    },
    {
      "type": "color",
      "id": "gallery_border",
      "label": "t:bundle-220.gallery_border",
      "default": "rgba(0,0,0,0)"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.border_radius",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "show_thumbnails",
      "label": "t:sections.bundle-extra-words.sections.main-product-page.settings.gallery.show_thumbnails",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_zoom",
      "label": "t:sections.main-product.settings.enable_zoom.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "t:sections.main-product.settings.enable_video_looping.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_video_autoplay",
      "label": "t:video-extra-functions.autoplay.label",
      "info": "t:video-extra-functions.autoplay.info",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "video_fit",
      "label": "t:local-260.labels.crop_videos_when_following_images_aspect_ratio",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.sections.main-product-page.settings.functionality.header"
    },
    {
      "type": "checkbox",
      "id": "default_to_first_variant",
      "label": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.variant_default.label",
      "info": "t:sections.bundle-extra-words.sections.product_grid.blocks.quick_buy.settings.variant_default.info",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sticky_atc.label"
    },
    {
      "type": "checkbox",
      "id": "sticky_add_to_cart",
      "label": "t:sticky_atc.enable_sticky_atc",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "sticky_atc_variants",
      "label": "t:local-260.labels.enable_add_to_cart_for_multiple_variants_label",
      "info": "t:local-260.labels.enable_add_to_cart_for_multiple_variants_info"
    },
    {
      "type": "select",
      "id": "sticky_atc_style",
      "label": "t:sections.local-extra-words.sections.header.blocks.info.style.label",
      "options": [
        {
          "value": "wide",
          "label": "t:sticky_atc.sticky_atc_style_wide"
        },
        {
          "value": "floating",
          "label": "t:sticky_atc.sticky_atc_style_floating"
        }
      ],
      "default": "floating"
    },
    {
      "type": "color",
      "id": "sticky_bar_bgcolor",
      "label": "t:sections.announcement-bar.settings.bar_bgcolor.label",
      "default": "#2e2e2e"
    },
    {
      "type": "color",
      "id": "sticky_bar_txtcolor",
      "label": "t:sections.announcement-bar.settings.bar_txtcolor.label",
      "default": "#ffffff"
    }
  ]
}
{% endschema %}
