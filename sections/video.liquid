<div class="container--large container--vertical-space{% if section.settings.gutter_decrease %}-small{% endif %}">
  {%- render 'section-heading',
    heading: section.settings.heading,
    subheading: section.settings.subheading,
    heading_size: section.settings.section_heading_size,
    section_layout: section.settings.section_heading_layout,
    seo_h_tag: section.settings.seo_h_tag
  -%}

  {%- unless section.settings.video == blank -%}
    {{ 'component-video.css' | asset_url | stylesheet_tag }}

    {%- capture title_content -%}
      {%- if section.settings.video_title != blank -%}
        <div class="video-popup-title remove-empty-space">
          {%- unless section.settings.video_title == blank -%}
            <{{ section.settings.seo_h_tag }} class="text-font--heading {{ section.settings.title_size }} gutter-top--large">
              {{ section.settings.video_title | escape }}
            </{{ section.settings.seo_h_tag }}>
          {%- endunless -%}
        </div>
      {%- endif -%}
    {%- endcapture -%}

    <div id="video-popup-{{ section.id }}" class="video-popup video-popup--section element--border-radius">
      {%- capture sizes -%}
        sizes="(max-width: {{ settings.theme_max_width }}px) calc(100vw - 20px), {{ settings.theme_max_width }}px"
      {%- endcapture -%}
      {%- render 'video-component',
        video_url_id: section.settings.video.id,
        video_url_type: section.settings.video.type,
        image: section.settings.image,
        autoplay_video: false,
        loop_video: false,
        is_background: true,
        id: section.id,
        title: section.settings.video_title,
        content: title_content,
        sizes: sizes
      -%}
    </div>

    <script>
      window.KrownAssetLoader.loadScript('{{ "component-video.js" | asset_url }}');
    </script>

    {%- if section.settings.color_background_main != 'rgba(0,0,0,0)' -%}
      {% style %}
        #video-popup-{{ section.id }} .video-component__background:after {
          content: "";
          background-color: {{ section.settings.color_background_main }};
        }
      {% endstyle %}
    {%- endif -%}

    {%- if section.settings.color_text_main != 'rgba(0,0,0,0)' -%}
      {% style %}
        #video-popup-{{ section.id }} .video-component__container {
          --color-text-main: {{ section.settings.color_text_main }};
        }
      {% endstyle %}
    {%- endif -%}
  {%- endunless -%}
</div>

{% schema %}
{
  "name": "t:sections.local-extra-words.sections.video.name",
  "class": "mount-video-popup section-w-margin no-overflow",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.sections.headings.name"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.local-extra-words.sections.headings.heading",
      "default": "Video"
    },
    {
      "type": "inline_richtext",
      "id": "subheading",
      "label": "t:sections.local-extra-words.sections.headings.subheading",
      "default": "Video <strong>description</strong>"
    },
    {
      "type": "select",
      "id": "section_heading_size",
      "label": "t:sections.bundle-extra-words.sections.headings.size.label",
      "options": [
        {
          "value": "text-size--regular",
          "label": "t:sections.bundle-extra-words.sections.headings.size.option_1"
        },
        {
          "value": "text-size--large",
          "label": "t:sections.bundle-extra-words.sections.headings.size.option_2"
        }
      ],
      "default": "text-size--regular"
    },
    {
      "type": "select",
      "id": "section_heading_layout",
      "label": "t:sections.bundle-extra-words.sections.headings.alignment.label",
      "options": [
        {
          "value": "section-heading--left section-heading--one-row",
          "label": "t:sections.bundle-extra-words.sections.headings.alignment.option_1",
          "group": "t:sections.bundle-extra-words.sections.headings.layout.option_1"
        },
        {
          "value": "section-heading--left section-heading--two-rows",
          "label": "t:sections.bundle-extra-words.sections.headings.alignment.option_1",
          "group": "t:sections.bundle-extra-words.sections.headings.layout.option_2"
        },
        {
          "value": "section-heading--center section-heading--two-rows",
          "label": "t:sections.bundle-extra-words.sections.headings.alignment.option_2",
          "group": "t:sections.bundle-extra-words.sections.headings.layout.option_2"
        }
      ],
      "default": "section-heading--left section-heading--one-row"
    },
    {
      "id": "video",
      "type": "video_url",
      "label": "t:sections.local-extra-words.sections.video.settings.video.label",
      "accept": ["youtube", "vimeo"],
      "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.local-extra-words.sections.video.settings.image.label"
    },
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.sections.video.title"
    },
    {
      "type": "text",
      "id": "video_title",
      "label": "t:sections.local-extra-words.sections.contact-form.blocks.contact-info.settings.title.label",
      "default": "Video Title"
    },
    {
      "type": "select",
      "id": "title_size",
      "label": "t:sections.local-extra-words.settings_schema.product-card.title-size.name",
      "options": [
        {
          "value": "heading-size--small",
          "label": "t:sections.local-extra-words.sections.media-with-text-overlay.settings.option__1"
        },
        {
          "value": "heading-size--regular",
          "label": "t:sections.local-extra-words.sections.media-with-text-overlay.settings.option__5"
        },
        {
          "value": "heading-size--large",
          "label": "t:sections.local-extra-words.settings_schema.product-card.title-size.options__2"
        }
      ],
      "default": "heading-size--large"
    },
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.settings_schema.card.settings.style.header"
    },
    {
      "type": "color",
      "id": "color_background_main",
      "label": "t:sections.local-extra-words.settings_schema.colors.settings.overlay",
      "default": "rgba(0,0,0,0)"
    },
    {
      "type": "color",
      "id": "color_text_main",
      "label": "t:sections.split-extra-words.settings_schema.colors.settings.text",
      "default": "rgba(0,0,0,0)"
    },
    {
      "type": "header",
      "content": "t:sections.bundle-extra-words.sections.headings.gutter.label"
    },
    {
      "type": "checkbox",
      "id": "gutter_decrease",
      "label": "t:sections.bundle-extra-words.sections.headings.gutter.content",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.refactor_words.seo.name"
    },
    {
      "type": "select",
      "id": "seo_h_tag",
      "label": "t:sections.refactor_words.seo.label",
      "info": "t:sections.refactor_words.seo.info",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        },
        {
          "value": "span",
          "label": "span"
        }
      ],
      "default": "h3"
    }
  ],
  "presets": [
    {
      "name": "t:sections.local-extra-words.sections.video.name",
      "category": "t:sections-categories.media-galleries"
    }
  ],
  "disabled_on": {
    "groups": ["header"]
  }
}
{% endschema %}
